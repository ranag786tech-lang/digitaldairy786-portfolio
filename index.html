<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Nexus | @digitaldairy786</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #00ff88;
            --secondary: #00d4ff;
            --bg: #000;
        }

        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        /* âš›ï¸ NEXUS CORE CANVAS */
        #nexus { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; filter: saturate(1.2) contrast(1.1); }

        /* ğŸ“Ÿ HUD STYLING */
        .hud { position: fixed; top: 20px; left: 20px; color: var(--primary); font-family: 'Courier New', monospace; font-size: 11px; text-shadow: 0 0 5px var(--primary); opacity: 0.8; z-index: 100; pointer-events: none; }
        
        /* ğŸ¬ INTRO OVERLAY */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 1s ease;
        }
        .intro-container { width: 80%; max-width: 500px; border: 2px solid var(--primary); border-radius: 20px; overflow: hidden; box-shadow: 0 0 30px var(--primary); }
        #intro-img { width: 100%; display: block; }

        /* ğŸª STORE CONTENT */
        #main-ui { display: none; opacity: 0; transition: 2s; padding-top: 100px; }
        .glass-panel { background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); border: 1px solid var(--primary); border-radius: 20px; padding: 20px; margin: 20px; }
        
        .neon-text { font-family: 'Orbitron'; color: var(--primary); text-shadow: 0 0 10px var(--primary); text-align: center; }
        #recordStatus { position: fixed; top: 20px; right: 20px; color: #ff0000; font-weight: bold; display: none; border: 1px solid red; padding: 5px 10px; animation: blink 1s infinite; z-index: 1000; }
        
        @keyframes blink { 50% { opacity: 0.3; } }
    </style>
</head>
<body>

<canvas id="nexus"></canvas>

<div class="hud">
    <div>SYSTEM: QUANTUM_DAIRY_CORE</div>
    <div>ARCHITECT: @digitaldairy786</div>
    <div>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
    <div>STATUS: <span id="status">INITIATING...</span></div>
    <div>BASS: <span id="bassVal">0</span></div>
</div>

<div id="recordStatus">â— REC</div>

<div id="intro-overlay">
    <div class="intro-container">
        <img id="intro-img" src="images/act1-gate.png">
    </div>
    <h2 class="neon-text" id="intro-caption" style="margin-top:20px;">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</h2>
</div>

<div id="main-ui">
    <h1 class="neon-text" style="font-size: 3rem;">NEXUS COMMAND</h1>
    <div class="glass-panel" style="max-width: 600px; margin: 40px auto; text-align: center;">
        <p>Press <strong>'R'</strong> to Record Session</p>
        <p>Press <strong>'V'</strong> for VHS Filter</p>
        <p>Click anywhere to sync Audio DNA</p>
    </div>
</div>

<script>
const canvas = document.getElementById('nexus');
const ctx = canvas.getContext('2d');
let particles = [];
let hue = 180;
let coreRot = 0;
let isAudioActive = false;
let visualEffect = 'none';

// Gravatar setup
const gravatar = new Image();
gravatar.src = "https://www.gravatar.com/avatar/895392e27606130d7045c1109a259c6b?s=200";

// Audio Logic
let audioCtx, analyser, dataArray;
function initAudio() {
    if (isAudioActive) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 256;
    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
        audioCtx.createMediaStreamSource(stream).connect(analyser);
        dataArray = new Uint8Array(analyser.frequencyBinCount);
        isAudioActive = true;
        document.getElementById('status').innerText = "AUDIO_SYNC_ACTIVE";
    });
}

// Particle Engine
class Particle {
    constructor() { this.reset(); }
    reset() {
        this.x = canvas.width/2; this.y = canvas.height/2;
        this.vx = (Math.random()-0.5)*12; this.vy = (Math.random()-0.5)*12;
        this.life = 1; this.hue = hue;
    }
    update(bass) {
        this.x += this.vx * (1 + bass/40); this.y += this.vy * (1 + bass/40);
        this.life -= 0.01;
        if (this.life <= 0) this.reset();
    }
    draw() {
        ctx.fillStyle = `hsla(${this.hue}, 100%, 50%, ${this.life})`;
        ctx.beginPath(); ctx.arc(this.x, this.y, 2, 0, Math.PI*2); ctx.fill();
    }
}

function init() {
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    for(let i=0; i<150; i++) particles.push(new Particle());
}

function animate() {
    let bass = 0;
    if (isAudioActive) {
        analyser.getByteFrequencyData(dataArray);
        bass = dataArray[2] / 2;
        document.getElementById('bassVal').textContent = Math.round(bass);
    }
    
    ctx.fillStyle = 'rgba(0,0,0,0.15)';
    ctx.fillRect(0,0,canvas.width, canvas.height);
    
    hue += 0.5; coreRot += 0.01 + (bass/500);
    particles.forEach(p => { p.update(bass); p.draw(); });

    // Draw Pulsing Core
    let r = 80 + bass;
    ctx.save();
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.rotate(coreRot);
    ctx.beginPath(); ctx.arc(0, 0, r, 0, Math.PI*2);
    ctx.strokeStyle = `hsla(${hue}, 100%, 50%, 0.8)`;
    ctx.lineWidth = 5; ctx.stroke();
    ctx.clip();
    if (gravatar.complete) ctx.drawImage(gravatar, -r, -r, r*2, r*2);
    ctx.restore();

    if (visualEffect === 'vhs') {
        ctx.fillStyle = 'rgba(255,255,255,0.05)';
        for(let i=0; i<canvas.height; i+=4) ctx.fillRect(0, i, canvas.width, 1);
    }
    requestAnimationFrame(animate);
}

// Intro Logic
const acts = [
    {img:'images/act1-gate.png', txt:'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù'},
    {img:'images/act5-nfts.png', txt:'SYNCING QUANTUM CORE...'},
    {img:'images/act7-heart.png', txt:'WELCOME ARCHITECT'}
];
let cur = 0;
function runIntro() {
    if(cur < acts.length) {
        document.getElementById('intro-img').src = acts[cur].img;
        document.getElementById('intro-caption').innerText = acts[cur].txt;
        cur++; setTimeout(runIntro, 2000);
    } else {
        document.getElementById('intro-overlay').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('intro-overlay').style.display='none';
            document.getElementById('main-ui').style.display='block';
            setTimeout(() => document.getElementById('main-ui').style.opacity='1', 100);
        }, 1000);
    }
}

window.addEventListener('click', () => { initAudio(); });
window.addEventListener('keydown', e => {
    if (e.key === 'v') visualEffect = visualEffect === 'vhs' ? 'none' : 'vhs';
});

init(); animate(); runIntro();
window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
</script>
</body>
</html>
